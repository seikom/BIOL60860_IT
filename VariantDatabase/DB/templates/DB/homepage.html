

{% extends 'DB/base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}



<html>
        <head>
        <title>Variant database</title>
		</head>
	   	<!-- Required meta tags -->
   		 <meta charset="utf-8">
    	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    	<!-- Bootstrap and datatables CSS -->
    	<link rel="stylesheet" type="text/css" href="{% static "DataTables/Bootstrap-4-4.1.1/css/bootstrap.min.css" %}"/>
    	<link rel="stylesheet" type="text/css" href="{% static "DataTables/datatables.min.css" %}"/>

    	<!-- jQuery, bootstrap and datatables javascript - jQuery must go first! -->
    	<script type="text/javascript" src="{% static "DataTables/jQuery-3.3.1/jQuery-3.3.1.min.js" %}"></script>
    	<script type="text/javascript" src="{% static "DataTables/datatables.min.js" %}"></script>
    	<script type="text/javascript" src="{% static "DataTables/Bootstrap-4-4.1.1/js/bootstrap.min.js" %}"></script>

        	</div>

		<table id="summary_table" class="table table-hover table-bordered table-responsive">
		<div>

		</div>


    <div class="table-responsive">
    <table class="table table-striped">
		<thead>
		    <tr>
          <th>Gene</th>
          <th>Variant</th>
		      <th>cDNA HGVS</th>
		      <th>Protein HGVS</th>
		    </tr>
		</thead>

        {% for Variant in Variants %}
            <tr>
              <td>{{Variant.gene}}</td>
              <td><a href="{% url 'Variantpage' %}">{{ Variant.variant_genome | truncatechars:20 }}</td>              
              <td><a >{{ Variant.variant_cdna | truncatechars:20 }}</td>
              <td><a >{{ Variant.variant_protein | truncatechars:20 }}</td>

            </tr>
        {% endfor %}

	</html>
{% endblock %}



<br><br>
<center>
  <div>
  <h4> Import variants from file </h4>
  <br>
  
  {% crispy form %}

  <p class="text-muted">Import file must be the .tsv file outputted by the Variant Database. If there are any errors, the data will not be uploaded.</p>

  {% if error %}
    {% for e in error %}
      <div class="alert alert-danger col-lg-2-8">
        {{ e }}
      </div>
    {% endfor %}
  {% endif %}

  {% if success %}
    {% for s in success %}
      <div class="alert alert-success col-lg-2-8">
        {{ s }} <a href={% url 'pending_classifications' %}{{ params }}>View here.</a>
      </div>
    {% endfor %}
  {% endif %}

  {% if warn %}
    {% for w in warn %}
      <div class="alert alert-warning col-lg-2-8">
        {{ w }}
      </div>
    {% endfor %}
  {% endif %}
  </div>

  <br>
  <h5><a href="/manual_input">Input variant details manually</a></h5>
  <br><br>
</center>
<script>
$(document).ready(function(){
$("#file-upload-form").on("submit", function () {
    $(this).find(":submit").prop("disabled", true);
});
});
</script>